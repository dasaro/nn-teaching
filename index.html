<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neural Network Learning Demo</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header class="main-header">
            <h1>🧠 How AI Recognizes Images</h1>
            <p>Watch a neural network learn to identify objects step by step! This is how modern AI systems like image recognition work.</p>
        </header>
        
        <div class="app-layout">
            <!-- Compact Left Panel -->
            <div class="left-panel">
                <!-- Image & Controls in one compact section -->
                <div class="compact-section">
                    <h3>📸 Image & Controls</h3>
                    <canvas id="inputImage" width="140" height="140"></canvas>
                    <div class="image-selector">
                        <button class="img-btn selected" onclick="selectImage('dog1')">🐕</button>
                        <button class="img-btn" onclick="selectImage('dog2')">🐕</button>
                        <button class="img-btn" onclick="selectImage('dog3')">🐕</button>
                        <button class="img-btn" onclick="selectImage('cat')">🐱</button>
                        <button class="img-btn" onclick="selectImage('bird')">🐦</button>
                        <button class="img-btn" onclick="selectImage('fish')">🐟</button>
                        <button class="img-btn" onclick="selectImage('car')">🚗</button>
                        <button class="img-btn" onclick="selectImage('tree')">🌳</button>
                    </div>
                    
                    <!-- Compact teaching buttons -->
                    <div class="compact-teaching">
                        <label>🎓 Correct Answer:</label>
                        <div class="label-buttons">
                            <button id="labelDog" class="label-btn" onclick="setTrueLabel('dog')">🐕 Dog</button>
                            <button id="labelNotDog" class="label-btn" onclick="setTrueLabel('not-dog')">❌ Not Dog</button>
                        </div>
                        <div class="selected-label" id="selectedLabel">Auto-selected</div>
                    </div>
                </div>
                
                <!-- Main Controls -->
                <div class="main-controls">
                    <!-- Primary Learning Actions -->
                    <div class="action-buttons">
                        <button id="forwardBtn" onclick="runForwardPass()" class="action-btn think-btn" disabled title="See how the AI processes the image">🧠 Think</button>
                        <button id="backwardBtn" onclick="runBackwardPass()" class="action-btn learn-btn" disabled title="Watch the AI learn from its mistake">📚 Learn</button>
                        <button id="fullDemoBtn" onclick="startFullDemo()" class="action-btn demo-btn" title="Complete thinking + learning process">🚀 Full Demo</button>
                    </div>
                    
                    <!-- Training Controls -->
                    <div class="training-buttons">
                        <button id="trainBtn" onclick="trainToPerfection()" class="training-btn auto-train-btn" title="Instantly train to perfect accuracy">🎯 Auto-Train</button>
                        <button id="resetWeightsBtn" onclick="resetWeights()" class="training-btn reset-btn" title="Reset the AI's memory">🔄 Reset</button>
                    </div>
                    
                    <!-- Advanced Tools -->
                    <div class="tool-buttons">
                        <button id="whatIfBtn" onclick="toggleWeightSliders()" class="tool-btn" title="Explore how changing weights affects predictions">🔧 What If?</button>
                        <button id="expertViewBtn" onclick="toggleExpertViewMode()" class="tool-btn" title="Toggle detailed mathematical explanations">🎓 Expert View</button>
                        <button id="expertPanelBtn" onclick="toggleExpertPanel()" class="tool-btn" title="Advanced neural network parameters">⚙️ Config</button>
                        <button id="pixelViewerBtn" onclick="openPixelViewer()" class="tool-btn" title="Learn how images become numbers">🔍 Pixels</button>
                    </div>
                </div>
                
                <!-- Speed control -->
                <div class="speed-compact">
                    <label>⚡</label>
                    <input type="range" id="speedSlider" min="1" max="10" value="5">
                </div>
                
                <!-- Tutorial overlay -->
                <div id="tutorialStep" class="tutorial-overlay" style="display: none;">
                    <div class="tutorial-content">
                        <div class="tutorial-title" id="tutorialTitle">Step 1</div>
                        <div class="tutorial-text" id="tutorialText">Welcome!</div>
                        <div class="tutorial-actions">
                            <button id="tutorialNextBtn" onclick="nextTutorialStep()" class="tutorial-next">Next →</button>
                            <button id="tutorialSkipBtn" onclick="skipTutorial()" class="tutorial-skip">Skip</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Center - Neural Network Visualization -->
            <div class="network-area">
                <svg id="networkSvg" width="800" height="380">
                    <!-- Network will be drawn here -->
                </svg>
            </div>
            
            <!-- Right Sidebar - System Messages -->
            <div class="right-sidebar">
                <div class="sidebar-header">
                    <h3>📋 System Messages</h3>
                    <div class="view-mode-indicator" id="viewModeIndicator">
                        👁️ Student View
                    </div>
                </div>
                <div class="message-content" id="currentStep">
                    🎮 Ready! Pick "Think", "Learn", or "Full Demo"
                </div>
                <div class="sidebar-controls">
                    <button class="sidebar-btn" onclick="clearMessageLog()">🗑️ Clear</button>
                    <button class="sidebar-btn" onclick="toggleAutoScroll()">📜 Auto-scroll</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Pixel Viewer Modal -->
    <div id="pixelViewerModal" class="modal" style="display: none;">
        <div class="modal-content pixel-viewer-content">
            <div class="modal-header">
                <h2>🔍 How Images Become Pixels</h2>
                <button class="modal-close" onclick="closePixelViewer()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="compact-pixel-flow">
                    <!-- Main pixel processing flow -->
                    <div class="pixel-processing-flow">
                        <div class="original-image-section">
                            <h3>📸 Original Image</h3>
                            <canvas id="originalImageCanvas" width="140" height="140"></canvas>
                        </div>
                        
                        <div class="flow-arrow">→</div>
                        
                        <div class="pixel-grid-section">
                            <h3>🔍 8×8 Pixels</h3>
                            <canvas id="pixelGridCanvas" width="140" height="140"></canvas>
                            <div class="pixel-info" id="pixelInfo">Hover over pixels!</div>
                        </div>
                        
                        <div class="flow-arrow">→</div>
                        
                        <div class="pattern-extraction">
                            <h3>🧠 Pattern Values</h3>
                            <div class="pattern-neurons-vertical">
                                <div class="pattern-neuron-compact" data-pattern="A" onmouseover="highlightPixelRegions('A')" onmouseout="clearHighlight()">
                                    <div class="neuron-circle pattern-a">
                                        <div class="neuron-label">A</div>
                                        <div class="neuron-value" id="patternAValue">0.90</div>
                                    </div>
                                    <div class="pattern-calc" id="patternACalc">Top-left</div>
                                </div>
                                
                                <div class="pattern-neuron-compact" data-pattern="B" onmouseover="highlightPixelRegions('B')" onmouseout="clearHighlight()">
                                    <div class="neuron-circle pattern-b">
                                        <div class="neuron-label">B</div>
                                        <div class="neuron-value" id="patternBValue">0.90</div>
                                    </div>
                                    <div class="pattern-calc" id="patternBCalc">Top-right</div>
                                </div>
                                
                                <div class="pattern-neuron-compact" data-pattern="C" onmouseover="highlightPixelRegions('C')" onmouseout="clearHighlight()">
                                    <div class="neuron-circle pattern-c">
                                        <div class="neuron-label">C</div>
                                        <div class="neuron-value" id="patternCValue">0.10</div>
                                    </div>
                                    <div class="pattern-calc" id="patternCCalc">Bottom-left</div>
                                </div>
                                
                                <div class="pattern-neuron-compact" data-pattern="D" onmouseover="highlightPixelRegions('D')" onmouseout="clearHighlight()">
                                    <div class="neuron-circle pattern-d">
                                        <div class="neuron-label">D</div>
                                        <div class="neuron-value" id="patternDValue">0.10</div>
                                    </div>
                                    <div class="pattern-calc" id="patternDCalc">Bottom-right</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="intuition-box">
                        <h3>💡 The Big Idea</h3>
                        <p>Computers can't "see" images like we do. They only understand numbers! So we convert every image into a grid of numbers representing brightness. The AI learns patterns in these numbers to recognize different objects.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Expert Panel Modal -->
    <div id="expertPanelModal" class="modal" style="display: none;">
        <div class="modal-content expert-panel-content">
            <div class="modal-header">
                <h2>⚙️ Expert Neural Network Parameters</h2>
                <button class="modal-close" onclick="closeExpertPanel()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="expert-panel-grid">
                    <!-- Activation Functions Section -->
                    <div class="expert-section">
                        <h3>🧠 Activation Functions</h3>
                        <div class="param-group">
                            <label>Hidden Layer Activation:</label>
                            <select id="hiddenActivation" onchange="updateExpertConfig('hiddenActivation', this.value)">
                                <option value="leaky_relu">Leaky ReLU</option>
                                <option value="sigmoid">Sigmoid</option>
                                <option value="tanh">Tanh</option>
                            </select>
                        </div>
                        <div class="param-group">
                            <label>Output Layer Activation:</label>
                            <select id="outputActivation" onchange="updateExpertConfig('outputActivation', this.value)">
                                <option value="softmax">Softmax</option>
                                <option value="sigmoid">Sigmoid</option>
                            </select>
                        </div>
                        <div class="param-group">
                            <label>Leaky ReLU Alpha:</label>
                            <input type="range" id="leakyReLUAlpha" min="0.01" max="0.3" step="0.01" value="0.1" 
                                   onchange="updateExpertConfig('leakyReLUAlpha', parseFloat(this.value))">
                            <span id="leakyReLUAlphaValue">0.1</span>
                        </div>
                    </div>
                    
                    <!-- Training Parameters Section -->
                    <div class="expert-section">
                        <h3>📚 Training Parameters</h3>
                        <div class="param-group">
                            <label>Learning Rate:</label>
                            <input type="range" id="learningRateSlider" min="0.001" max="1.0" step="0.001" value="0.1" 
                                   onchange="updateExpertConfig('learningRate', parseFloat(this.value))">
                            <span id="learningRateValue">0.1</span>
                        </div>
                        <div class="param-group">
                            <label>Momentum:</label>
                            <input type="range" id="momentumSlider" min="0.0" max="0.99" step="0.01" value="0.0" 
                                   onchange="updateExpertConfig('momentum', parseFloat(this.value))">
                            <span id="momentumValue">0.0</span>
                        </div>
                        <div class="param-group">
                            <label>L2 Regularization:</label>
                            <input type="range" id="l2RegSlider" min="0.0" max="0.01" step="0.0001" value="0.0" 
                                   onchange="updateExpertConfig('l2Regularization', parseFloat(this.value))">
                            <span id="l2RegValue">0.0</span>
                        </div>
                        <div class="param-group">
                            <label>Max Epochs:</label>
                            <input type="range" id="maxEpochsSlider" min="10" max="500" step="10" value="100" 
                                   onchange="updateExpertConfig('maxEpochs', parseInt(this.value))">
                            <span id="maxEpochsValue">100</span>
                        </div>
                    </div>
                    
                    <!-- Advanced Settings Section -->
                    <div class="expert-section">
                        <h3>🎛️ Advanced Settings</h3>
                        <div class="param-group">
                            <label>
                                <input type="checkbox" id="adaptiveLearningRate" 
                                       onchange="updateExpertConfig('adaptiveLearningRate', this.checked)"> 
                                Adaptive Learning Rate
                            </label>
                        </div>
                        <div class="param-group">
                            <label>Batch Size:</label>
                            <input type="range" id="batchSizeSlider" min="1" max="8" step="1" value="1" 
                                   onchange="updateExpertConfig('batchSize', parseInt(this.value))">
                            <span id="batchSizeValue">1</span>
                        </div>
                    </div>
                    
                    <!-- Network Architecture (Read-Only) -->
                    <div class="expert-section readonly-section">
                        <h3>🏗️ Network Architecture (Read-Only)</h3>
                        <div class="param-group">
                            <label>Input Size: <span id="inputSizeDisplay">4</span></label>
                        </div>
                        <div class="param-group">
                            <label>Hidden Size: <span id="hiddenSizeDisplay">4</span></label>
                        </div>
                        <div class="param-group">
                            <label>Output Size: <span id="outputSizeDisplay">2</span></label>
                        </div>
                    </div>
                </div>
                
                <div class="expert-actions">
                    <button onclick="resetExpertDefaults()" class="expert-btn">🔄 Reset to Defaults</button>
                    <button onclick="applyExpertConfig()" class="expert-btn expert-btn-primary">✅ Apply & Restart Network</button>
                </div>
            </div>
        </div>
    </div>
    
    <script src="script.js"></script>
</body>
</html>